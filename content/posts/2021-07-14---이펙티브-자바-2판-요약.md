---
title: "이펙티브 자바 2판 요약"
date: "2021-07-14"
template: "post"
draft: false
slug: "이펙티브-자바-2판-요약"
category: "Java"
tags:
  - "#Java"
description: ""
---

# 2장 객체의 생성과 삭제

## 규칙1 생성자 대신 정적 팩터리 메서드를 사용할 수 없는지 생각해 보라

```Java
// 기본 타입 boolean 값을 Boolean 객체에 대한 참조로 변환한다.
public static Boolean valueOf(boolean b) {
    return b ? Boolean.TRUE : Boolean.FALSE;
}
```

정적 팩터리 메서드의 장점

1. 이름이 있다. -> 가독성 좋음, 같은 시그니처를 같은 메서드를 여러개 만들 수 있음
2. 호출할 때마다 새로운 객체를 생성할 필요는 없다.

위의 코드가 좋은 예시가 된다. 객체를 만드는 비용이 클 때 적용하면 성능 개선 가능하다.  
같은 객체를 반복해서 반환할 수 있으므로 객체의 수를 제어할 수 있다. 따라서 비용이 큰 `a.equals(b)` 대신 `a==b`만으로도 비교 가능하다.

3. 반환값 자료형의 하위 자료형 객체를 반환할 수 있다.

이 유연성을 활요하면 public으로 선언되지 않은 클래스의 객체를 반환하는 API를 만들 수 있다. 그러면 훨씬 간결한 API를 만들 수 있다.

4. 형인자 자료형 객체를 만들 때 편하다.(JDK 1.7 이전의 이야기)

정적 팩터리 메서드의 단점

1. 하위 클래스를 만들 수 없다.
2. 정적 팩터리 메서드 끼리 구분되지 않는다.

보통 정적 팩터리 메서드의 이름으로는 다음과 같은 것들을 사용한다.

+ valueOf(of): 인자로 주어진 값과 같은 값은 갖는 객체를 반환
+ getInstance: 인자에 기술된 객체를 반환하지만, 값이 다를 수 있다.
+ newInstance: getInstance와 같지만 호출할 때마다 다른 객체를 반환한다.
+ newType: newInstance와 같지만, 반환될 객체의 클래스와 다른 클래스에 팩터리 메서드가 있을 때 사용한다. Type은 팩터리 메서드가 반환할 객체의 자료형이다.

## 규칙2 생성자 인자가 많을 때는 Builder 패턴 적용을 고려하라

빌더 패턴은 인자가 많은(4개 이상) 생성자나 정적 팩터리가 필요한 클래스를 설계할 때, 대부분의 인자가 선택적 인자인 상황에 유용하다. 그러나 객체를 생성하려면 우선 빌더 객체를 생성해야 한다는 성능적 단점도 있다.

## 규칙3 private 생성자나 enum 자료형은 싱글턴 패턴을 따르도록 설계하라

JDK 1.5이전의 싱글톤 구현 방법 1

```Java
public class Elvis {
  public static final Elvis INSTANCE = new Elvis();
  private Elvis() {}
}
```