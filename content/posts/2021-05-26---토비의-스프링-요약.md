---
title: "토비의 스프링 요약"
date: "2021-05-26"
template: "post"
draft: false
slug: "토비의-스프링-요약"
category: "Spring Framework"
tags:
  - "#Spring Framework"
  - "#Java"
description: ""
---

`JavaBean` : 디폴트 생성자와 프로퍼티가 있는 오브젝트를 가르킵니다.

## 코드를 개선하는 방법

1. 로직 중복 제거
2. 확장에 용이한 구조로 변경

확장을 위해 템플릿 메소드 패턴, 팩토리 메소드 패턴을 사용해야 합니다. 

**템플릿 메소드 패턴** : 변하지 않는 기능은 슈퍼클래스, 확장할 기능은 서브클래스에서 만듭니다. 그리고 슈퍼클래스에는 훅 메소드와 추상 메소드가 있습니다.  
**훅 메소드** : 서브클래스에서 선택적으로 오버라이드 가능한 메소드  
**추상 메소드** : 서브클래스에서 반드시 구현해야 하는 메소드

```Java
public abstract class Super {
  public void templateMethod() { // 이것이 템플릿 메소드
    hookMethod();
    abstractMethod();
  }

  protected void hookMethod() {}
  public abstract void abstractMethod() {}
}

public class Sub1 extends Super {
  protected void hookMethod() {
    ...
  }
  public abstract void abstractMethod() {
    ...
  }
}

```

**팩토리 메소드 패턴** : 슈퍼클래스를 상속 받는 서브클래스들끼리 오브젝트를 생성하는 방식이 다른 패턴입니다.
![FactoryMethodPattern.png](/media/posts/2021-05-26---토비의-스프링-요약/FactoryMethodPattern.png)

**인터페이스**, **관계설정 책임의 분리**를 통해 확장할 수 도 있습니다.  

**개방 폐쇄 원칙(OCP, Open-Closed Principle)** : 확장에는 개방, 하고 변경에는 폐쇄되어야 한다는 원칙입니다. 객체지향 설계 원칙(SOLID) 중 하나입니다.

**높은 응집도** : 하나의 모듈에서는 하나의 기능만 수행되게 합니다.

**낮은 결합도** : 하나의 오브젝트가 변경이 일어날 때 관계 맺고 있는 다른 오브젝트의 변화는 최소화 해야합니다.

**전략 패턴** : 변경이 필요한 모듈은 인터페이스를 통해 외부로 분리시키는 패턴입니다. 전략을 바꿔가면서 사용 가능하게 됩니다.

**제어의 역전(IoC)** : 사용하는 쪽에서 프로그램을 제어하는 것이 아니라 기능을 미리 구현한 후 필요할 때 호출되어 사용되도록 제어권을 역전시킨 것을 말합니다. 예시로 템플릿 메소드 패턴, 프레임워크 가 있습니다.
 - `빈` : 제어권을 가지고 직접 만들고 관계를 부여하는 오브젝트
 - `빈 팩토리`(=어플리케이션 컨텍스트) : 빈의 생성과 관계설정 같은 제어를 담당하는 IoC 오브젝트
 - `@Configuration` : 오브젝트 설정을 담당한느 클래스
 - `@Bean` : 오브젝트를 만들어주는 메소드
 - `AnnotationConfiguration` :  @Configuration이 붙은 자바 코드를 설정 정보로 사용하게 해줍니다.
 - `ApplicationContext.getBean(변수명, 오브젝트)` : 오브젝트를 가져올 수 있습니다. 

## 싱글톤 레지스트리

스프링은 기본적으로 싱글톤으로 빈을 만듭니다. 그 이유는 대규모 엔터프라이즈 어플리케이션에서 오브젝트 생성을 최소화하기 위해서 입니다. 그러나 싱글톤은 상속 불가, 테스트 어려움, 서버환경에서 싱글톤이 하나 이상의 오브젝트 만들어짐, 전역상태라는 단점이 있습니다. 그래서 **싱글톤 레지스트리**라는 것이 탄생하게 되었습니다.

**싱글톤 레지스트리** : 스프링은 직접 싱글톤 형태의 오브젝트를 만들고 관리하는 기능을 제공합니다. 스태틱 메소드와 private 생성자 없이 자바 클래스를 싱글톤으로 활용하게 해준다는 장점이 있습니다.

## 1.7 의존관계 주입(DI)

### 1.7.2 런타임 의존관계 설정

#### 의존관계

![dependencyDiagram.png](/media/posts/2021-05-26---토비의-스프링-요약/dependencyDiagram.png)

A가 B에 의존하고 있음을 나타냅니다. B가 변하면 A에 영향을 미칩니다. 반대의 경우는 성립되지 않습니다. (단방향성)

## 테스트

단위 테스트 : 하나의 대상에 집중하여 테스트하는 방식입니다.