---
title: "마스터링 스프링 클라우드 요약"
date: "2021-07-03"
template: "post"
draft: false
slug: "마스터링-스프링-클라우드-요약"
category: "Spring Cloud"
tags:
  - "#Spring Cloud"
  - "#MSA"
description: ""
---

### 01 마이크로서비스 소개

#### 마이크로서비스의 장점

마이크로서비스 : 비즈니스 요구사항을 구현한 하나의 애플리케이션을 느슨하게 연결된 여러 애플리케이션으로 쪼개는 것을 말한다.

마이크로서비스의 장점

1. 대규모의 복잡한 애플리케이션을 지속해서 배포 가능
2. 소스 코드 규모 작음, 이해가 쉬움
3. 영역 분리 명확

#### 스프링 프레임워크로 마이크로서비스 만들기

스프링 클라우드는 서비스 레지스트리, 컨피규레이션 서버, 서킷 브레이커, 클라우드 버스, OAuth 패턴, API 게이트웨이와 같은 마이크로서비스 기반 아키텍처에서 사용되는 모든 검증된 패턴을 구현한다.

#### 클라우드 네이티브 개발

*네이티브 클라우드 애플리케이션이란 클라우드 환경을 위해 잘 설계된 프로그램이다.*

스프링은 클라우드 네이티브 배포의 가속을 위해 설계됐다. 스프링 부터 기반으로 애플리케이션을 개발하면 매우 빠르게 수행할 수 있다.

#### 마이크로서비스 아키텍처 배우기

##### 모놀리식 애플리케이션

+ 레이어 모델 : 클라이언트-API-데이터베이스
+ 전체 시스템을 다시 배포해야 하는 개발 방식

##### API 게이트웨이

API 게이트웨이는 클라이언트의 모든 요청을 다양한 API 종단점으로 **동적**으로 전달한다.  
여기서 동적이라는 말은 서비스 디스커버리의 목록에 기반한다는 것이다.

API 게이트웨이가 특정 서비스 호출을 숨기거나 동적 라우팅 기능만 외에 데이터 추적, 요청 메트릭 수집하고 통계를 낼 수 도 있다.

#### 서비스 디스커버리의 필요성 이해하기

마이크로서비스는 서로 상호작용을 하기 위해서 다른 서비스의 네트워크 주소 정보를 유지해야 한다. 애플리케이션이 재시작된 후에 주소가 동적으로 변경되면 문제가 생긴다. 이런 컨피규레이션을 저장하는 것은 어려운 일이다.

+ 서비스 디스커버리 : 컴퓨터 네트워크상의 디바이스가 제공하는 디바이스와 서비스를 자동으로 감지하는 서비스다. 모든 서비스는 시작 후 다른 서비스가 접근할 수 있는 하나의 중앙 장소에 자신을 등록한다. 등록 키는 대부분 서비스의 네트워크 위치를 사용한다. 아울러 각 마이크로서비스는 등록의 변경 사항도 알아야 한다. 그 정보는 주기적으로 갱신함으로써 얻을 수 있다.

어떤 솔루션은 서비스 디스커버리를 서비 컨피규레이션 기능과 함께 사용한다. 서버 컴피규레이션 기능은 중앙에서 관리할 수 있도록 한다. 일반덕으로 이러한 컨피규레이션은 REST 웹 서비스를 제공하는 서버가 된다. 각 마이크로서비스는 프로세스가 시작할 때 컨피규레이션 서버에 접속해 자신을 위한 입력값을 얻어오려고 시도한다. 이를 위한 방식으로는 버전 제어 시스템(ex. git)에 컨피규레이션을 저장하는 것과 key-value를 저장하는 솔루션(ex. Consul, Zookeeper)을 사용하는 것이 있다.